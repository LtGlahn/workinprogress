---
title: "Sinus"
output:
  html_document:
    code_folding: hide
    toc: true
    toc_depth: 2
    
---

Jeg har [python-kode](https://github.com/LtGlahn/workinprogress/blob/master/skriveapistatistikk.py) som henter oversikt over alle endringssett med "SINUS" i navn p√• klient eller eier fra NVDB skriveApi, og lagrer dette som CSV. Her er en analyse av disse dataene.

```{r,message=FALSE}
library(lubridate)
library( ggplot2)

# setwd( "D:/data/jobb/workinprogress")
df <- read.csv2('statistikk-sinus-20190917.csv', fileEncoding = 'utf-8')
df$dato <- lubridate::floor_date( lubridate::as_date(df$mottatt) ) 

# Antall bokstaver i eier-feltet. 6 tegn = internt SVV? 
df$eierlengde <- nchar( as.character( df$eier )) 
dfsvv <- droplevels( subset( df, eierlengde == 6) ) 

```

# Alle endringssett fra SINUS.infra

Alle endringssett som NVDB skriveAPi PROD har mottatt fra SINUS.infra, totalt `r nrow(df)` 


```{r}
myplot <- ggplot( df ) + aes( x = format( df$dato, "%Y-%m"), fill = format(df$dato, "%Y" )) + geom_bar() + theme(axis.text.x=element_blank())
myplot + labs( fill = '', x = 'Antall endringssett SINUS.infra per mnd')
```

# Endringssett i 2019

Endringsett for januar - august 2019. (P.t har vi kun data for halve september)

```{r}
# df2019 <- subset( df, (dato > as.Date( "2018-12-31") & (dato < as.Date("2019-09-01"))))

df2019 <- subset( df, dato > as.Date( "2018-12-31") )

myplot2 <- ggplot( df2019 ) + aes( x = format( df2019$dato, "%m") ) + geom_bar()
myplot2 + labs( x = 'Antall endringssett SINUS.infra per mnd for jan - sep 2019')

```

# Interne brukere i SVV

Totalt `r nrow(dfsvv)` endringssett med 6-bokstav ident registrert i apiskriv PROD fra `r as.character( as.Date( min(  dfsvv$dato )), "%x")` til `r as.character(as.Date( max(  dfsvv$dato )), "%x")` 

```{r}
myplot3 <- ggplot( dfsvv ) + aes( x = format( dfsvv$dato, "%m")) + geom_bar() 
myplot3 + labs(  x = 'Antall endringssett SVV-ansatte SINUS.infra per mnd')

```


```{r}

svvbrukere <- data.frame(sort( table(dfsvv$eier), decreasing = T ))
colnames(svvbrukere) <- c("Brukernavn", "Antall endringssett")

svvbrukere 
```


